<!-- ============================================================== -->
<!-- Simple four boxes Row -->
<!-- ============================================================== -->
<div fxLayout="row" fxLayoutWrap="wrap">
  <!-- column -->
  <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100">
    <mat-card>
      <mat-card-content>
        <!-- Row -->
        <h4>Registro de Defunción</h4>
        <!-- <button mat-raised-button color="primary" (click)="isLinear = !isLinear" id="toggle-linear">
            {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
          </button> -->
        <mat-horizontal-stepper #stepper (selectionChange)="cambioIndice($event)" [selectedIndex]="indice">

          <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
              <ng-template matStepLabel>Difunto</ng-template>
              <mat-card>
                <mat-card-content>
                  <mat-radio-group *ngIf="actor_difunto" fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100"
                    fxLayoutAlign="space-evenly center" [(ngModel)]="difuntoSelected" (ngModelChange)="changePersonType($event,'difunto')"
                    [ngModelOptions]="{standalone: true}">
                    <ng-container *ngFor="let actor of actor_difunto.personsType; let i = index;">
                      <mat-radio-button style="font-size: 13px" [value]="actor">{{actor.name}}</mat-radio-button>
                    </ng-container>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
              <mat-expansion-panel [expanded]="true" *ngIf="difuntoSelected.name && difuntoSelected.value == 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Difunto</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <span fxFlex.gt-sm="15" fxFlex.gt-xs="15" fxFlex="15">
                    <b>Buscar Persona</b>
                  </span>
                  <mat-form-field fxFlex.gt-sm="30" fxFlex.gt-xs="30" fxFlex="30">
                    <input matInput placeholder="Nº Documento" [(ngModel)]="personDifunto.docNumber" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="personDifunto.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>

                  <button fxFlex.gt-sm="10" fxFlex.gt-xs="10" fxFlex="10" mat-raised-button color="primary" (click)="findPerson('personDifunto','difunto')">Buscar</button>
                </div>
                <div *ngIf="!personDifunto.find && !difunto.person.id" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <mat-checkbox #foreignMom value="true" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">Extranjero</mat-checkbox>
                  <mat-form-field *ngIf="foreignMom.checked" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Pais de Nacimiento" [(ngModel)]="difunto.person.nationality"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                </div>
                <div *ngIf="!personDifunto.find && !difunto.person.id" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Apellido/s" [(ngModel)]="difunto.person.lastName" required
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Segundo Apellido" [(ngModel)]="difunto.person.secondLastName"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Nombre/s" [(ngModel)]="difunto.person.firstName" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Tipo de Documento" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person.docType.code">
                      <mat-option *ngFor="let doc of documentTypes" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Documento" [(ngModel)]="difunto.person.docNumber" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="date" placeholder="Fecha de Nacimiento" [(ngModel)]="difunto.person.birth.birthDay"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Estado Civil" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person.civilStatus.code">
                      <mat-option *ngFor="let doc of civilStatus" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Domicilio" [(ngModel)]="difunto.person.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Lugar de Nacimiento" [(ngModel)]="difunto.person.birth.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Profesión" [(ngModel)]="difunto.person.profession"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="difunto.person.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>
                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDifunto','difunto')">Crear
                      Persona</button>
                  </div> -->
                </div>
                <div *ngIf="personDifunto.find && difunto.person.id" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="center center">

                  <mat-card fxFlex.gt-sm="80" fxFlex.gt-xs="80" fxFlex="80">
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center">
                      <img style="height: 150px" *ngIf="difunto.person.photoBase64" [src]="'data:image;base64,' + difunto.person.photoBase64 | DifuntosSafeHtml" />
                    </div>
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40">
                      <div style="width:100%">
                        {{difunto.person.lastName + ' ' + (difunto.person.secondLastName ?
                        difunto.person.secondLastName : '') + ',
                        ' + difunto.person.firstName}}
                      </div>
                      <div style="width:100%">
                        {{difunto.person.docType.name + ': ' + difunto.person.docNumber}}
                      </div>
                      <div style="width:100%">
                        Fecha de Nacimiento: {{difunto.person.birth.birthDay | date: 'dd/MM/yyyy'}}
                      </div>
                      <div style="width:100%">
                        {{difunto.person.sex == 'M' ? 'Masculino':'Femenino'}}
                      </div>

                    </div>
                    <div fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" fxLayoutAlign="end start">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-button style="margin: 10px 10px 0 0;"
                        (click)="closePerson('difunto','personDifunto')"><i class="material-icons">
                          close
                        </i></button>
                    </div>
                  </mat-card>

                  <div *ngIf="difunto.person.optionsLastName && difunto.person.optionsLastName.length > 0" fxFlex.gt-sm="100"
                    fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between center"
                    style="margin-bottom: 10px;">

                    <mat-form-field *ngIf="difunto.person.optionsLastName && difunto.person.optionsLastName.length > 0 && !difunto.person.hasSecondLastName"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select placeholder="Seleccione el Apellido" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="difunto.person.lastNames" (ngModelChange)="changeLastNames($event,'difunto')">
                        <mat-option *ngFor="let doc of difunto.person.optionsLastName" [value]="doc">
                          {{ doc.lastName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="difunto.person.lastNames" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput readonly placeholder="Segundo Apellido" [(ngModel)]="difunto.person.lastNames.secondLastName"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <button *ngIf="difunto.person.hasSecondLastName" fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20"
                      mat-raised-button color="primary" (click)="difunto.person.hasSecondLastName = false">Modificar
                      Apellidos</button>

                  </div>

                  <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                    <ng-container *ngFor="let attr of difuntoSelected.attributes; let i = index;">
                      <!--INPUT-->
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <!-- END INPUT-->
                      <!--RADIO-->
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="difunto.person[attr.field]" [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="difunto.persondifunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <!--END RADIO-->
                      <!--SELECT-->
                      <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END SELECT-->
                      <!-- DEPARTAMENTO-->
                      <mat-form-field *ngIf="attr.type == 'showDepartament' && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')" [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                          (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END DPTO-->

                      <!--CITIES-->
                      <mat-form-field *ngIf="attr.type == 'showCity' && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                          <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END CITIES-->
                    </ng-container>

                    <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDifunto','difunto')">Crear
                        Persona</button>
                    </div> -->
                  </div>
                </div>
              </mat-expansion-panel>
              <mat-expansion-panel [expanded]="true" *ngIf="difuntoSelected.name && difuntoSelected.value != 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Difunto</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <ng-container *ngFor="let attr of difuntoSelected.attributes; let i = index;">
                    <!--INPUT-->
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <!-- END INPUT-->
                    <!--RADIO-->
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="difunto.person[attr.field]" [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="difunto.persondifunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <!--END RADIO-->
                    <!--SELECT-->
                    <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END SELECT-->
                    <!-- DEPARTAMENTO-->
                    <mat-form-field *ngIf="attr.type == 'showDepartament' && !attr.fieldLevel2" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')"[ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')"[ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')"[ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showDepartament' && attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDifunto')"[ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        >
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END DPTO-->
                    <!--CITIES-->
                    <mat-form-field *ngIf="attr.type == 'showCity' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">

                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field]">
                        <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="difunto.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of citiesDifunto" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END CITIES-->
                  </ng-container>

                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDifunto','difunto')">Crear
                      Persona</button>
                  </div> -->
                </div>
              </mat-expansion-panel>

              <div style="text-align: right; margin:20px 0 0 0;">
                <!-- <button mat-raised-button color="primary" (click)="backStep()">Atras</button> -->
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="secondFormGroup">
            <form [formGroup]="secondFormGroup">
              <ng-template matStepLabel>Progenitores</ng-template>
              <mat-card>
                <mat-card-content>
                  <mat-radio-group *ngIf="actor_progenitor_1" fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100"
                    fxLayoutAlign="space-evenly center" [(ngModel)]="progenitor_1Selected" (ngModelChange)="changePersonType($event,'progenitor_1')"
                    [ngModelOptions]="{standalone: true}">
                    <ng-container *ngFor="let actor of actor_progenitor_1.personsType; let i = index;">
                      <mat-radio-button style="font-size: 13px" [value]="actor">{{actor.name}}</mat-radio-button>
                    </ng-container>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
              <mat-expansion-panel [expanded]="true" *ngIf="progenitor_1Selected.name && progenitor_1Selected.value == 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Progenitor</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <span fxFlex.gt-sm="15" fxFlex.gt-xs="15" fxFlex="15">
                    <b>Buscar Persona</b>
                  </span>
                  <mat-form-field fxFlex.gt-sm="30" fxFlex.gt-xs="30" fxFlex="30">
                    <input matInput placeholder="Nº Documento" [(ngModel)]="personProgenitor_1.docNumber"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="personProgenitor_1.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>

                  <button fxFlex.gt-sm="10" fxFlex.gt-xs="10" fxFlex="10" mat-raised-button color="primary" (click)="findPerson('personProgenitor_1','progenitor_1')">Buscar</button>
                </div>
                <div *ngIf="!personProgenitor_1.find && !progenitor_1.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-checkbox #foreignMom value="true" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">Extranjero</mat-checkbox>
                  <mat-form-field *ngIf="foreignMom.checked" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Pais de Nacimiento" [(ngModel)]="progenitor_1.person.nationality"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                </div>
                <div *ngIf="!personProgenitor_1.find && !progenitor_1.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Apellido/s" [(ngModel)]="progenitor_1.person.lastName" required
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Segundo Apellido" [(ngModel)]="progenitor_1.person.secondLastName"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Nombre/s" [(ngModel)]="progenitor_1.person.firstName" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Tipo de Documento" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person.docType.code">
                      <mat-option *ngFor="let doc of documentTypes" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Documento" [(ngModel)]="progenitor_1.person.docNumber"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="date" placeholder="Fecha de Nacimiento" [(ngModel)]="progenitor_1.person.birth.birthDay"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Estado Civil" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person.civilStatus.code">
                      <mat-option *ngFor="let doc of civilStatus" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Domicilio" [(ngModel)]="progenitor_1.person.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Lugar de Nacimiento" [(ngModel)]="progenitor_1.person.birth.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Profesión" [(ngModel)]="progenitor_1.person.profession"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="progenitor_1.person.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>
                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_1','progenitor_1')">Crear
                      Persona</button>
                  </div> -->
                </div>
                <div *ngIf="personProgenitor_1.find && progenitor_1.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="center center">

                  <mat-card fxFlex.gt-sm="80" fxFlex.gt-xs="80" fxFlex="80">
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center">
                      <img style="height: 150px" *ngIf="progenitor_1.person.photoBase64" [src]="'data:image;base64,' + progenitor_1.person.photoBase64 | DifuntosSafeHtml" />
                    </div>
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40">
                      <div style="width:100%">
                        {{progenitor_1.person.lastName + ' ' + (progenitor_1.person.secondLastName ?
                        progenitor_1.person.secondLastName : '') + ',
                        ' + progenitor_1.person.firstName}}
                      </div>
                      <div style="width:100%">
                        {{progenitor_1.person.docType.name + ': ' + progenitor_1.person.docNumber}}
                      </div>
                      <div style="width:100%">
                        Fecha de Nacimiento: {{progenitor_1.person.birth.birthDay | date: 'dd/MM/yyyy'}}
                      </div>
                      <div style="width:100%">
                        {{progenitor_1.person.sex == 'M' ? 'Masculino':'Femenino'}}
                      </div>

                    </div>
                    <div fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" fxLayoutAlign="end start">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-button style="margin: 10px 10px 0 0;"
                        (click)="closePerson('progenitor_1','personProgenitor_1')"><i class="material-icons">
                          close
                        </i></button>
                    </div>
                  </mat-card>

                  <div *ngIf="progenitor_1.person.optionsLastName && progenitor_1.person.optionsLastName.length > 0"
                    fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between center"
                    style="margin-bottom: 10px;">

                    <mat-form-field *ngIf="progenitor_1.person.optionsLastName && progenitor_1.person.optionsLastName.length > 0 && !progenitor_1.person.hasSecondLastName"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select placeholder="Seleccione el Apellido" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="progenitor_1.person.lastNames" (ngModelChange)="changeLastNames($event,'progenitor_1')">
                        <mat-option *ngFor="let doc of progenitor_1.person.optionsLastName" [value]="doc">
                          {{ doc.lastName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="progenitor_1.person.lastNames" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput readonly placeholder="Segundo Apellido" [(ngModel)]="progenitor_1.person.lastNames.secondLastName"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <button *ngIf="progenitor_1.person.hasSecondLastName" fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20"
                      mat-raised-button color="primary" (click)="progenitor_1.person.hasSecondLastName = false">Modificar
                      Apellidos</button>

                  </div>

                  <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                    <ng-container *ngFor="let attr of progenitor_1Selected.attributes; let i = index;">
                      <!--INPUT-->
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <!-- END INPUT-->
                      <!--RADIO-->
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_1.person[attr.field]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_1.personprogenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <!--END RADIO-->
                      <!--SELECT-->
                      <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END SELECT-->
                      <!--DEPARTMENT-->

                      <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END DEPTO-->

                      <!--CITIES-->

                      <mat-form-field *ngIf="attr.type == showCity && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                          <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END CITIES-->
                    </ng-container>

                    <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_1','progenitor_1')">Crear
                        Persona</button>
                    </div> -->
                  </div>
                </div>
              </mat-expansion-panel>
              <mat-expansion-panel [expanded]="true" *ngIf="progenitor_1Selected.name && progenitor_1Selected.value != 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Progenitor</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <ng-container *ngFor="let attr of progenitor_1Selected.attributes; let i = index;">
                    <!--INPUT-->
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <!-- END INPUT-->
                    <!--RADIO-->
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_1.person[attr.field]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_1.personprogenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <!--END RADIO-->
                    <!--SELECT-->
                    <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END SELECT-->
                    <!--DEPARTMENT-->

                    <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_1')" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END DEPTO-->

                    <!--CITIES-->

                    <mat-form-field *ngIf="attr.type == showCity && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field]">
                        <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_1.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of citiesProgenitor_1" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END CITIES-->
                  </ng-container>

                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_1','progenitor_1')">Crear
                      Persona</button>
                  </div> -->
                </div>
              </mat-expansion-panel>

              <div style="text-align: right; margin:20px 0 0 0;">
                <button mat-raised-button color="primary" (click)="backStep()">Atras</button>
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="thirdFormGroup">
            <form [formGroup]="thirdFormGroup">
              <ng-template matStepLabel>Progenitores</ng-template>
              <mat-card>
                <mat-card-content>
                  <mat-radio-group *ngIf="actor_progenitor_2" fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100"
                    fxLayoutAlign="space-evenly center" [(ngModel)]="progenitor_2Selected" (ngModelChange)="changePersonType($event,'progenitor_2')"
                    [ngModelOptions]="{standalone: true}">
                    <ng-container *ngFor="let actor of actor_progenitor_2.personsType; let i = index;">
                      <mat-radio-button style="font-size: 13px" [value]="actor">{{actor.name}}</mat-radio-button>
                    </ng-container>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
              <mat-expansion-panel [expanded]="true" *ngIf="progenitor_2Selected.name && progenitor_2Selected.value == 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Progenitor </strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <span fxFlex.gt-sm="15" fxFlex.gt-xs="15" fxFlex="15">
                    <b>Buscar Persona</b>
                  </span>
                  <mat-form-field fxFlex.gt-sm="30" fxFlex.gt-xs="30" fxFlex="30">
                    <input matInput placeholder="Nº Documento" [(ngModel)]="personProgenitor_2.docNumber"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="personProgenitor_2.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>

                  <button fxFlex.gt-sm="10" fxFlex.gt-xs="10" fxFlex="10" mat-raised-button color="primary" (click)="findPerson('personProgenitor_2','progenitor_2')">Buscar</button>
                </div>
                <div *ngIf="!personProgenitor_2.find && !progenitor_2.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-checkbox #foreignMom value="true" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">Extranjero</mat-checkbox>
                  <mat-form-field *ngIf="foreignMom.checked" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Pais de Nacimiento" [(ngModel)]="progenitor_2.person.nationality"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                </div>
                <div *ngIf="!personProgenitor_2.find && !progenitor_2.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Apellido/s" [(ngModel)]="progenitor_2.person.lastName" required
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Segundo Apellido" [(ngModel)]="progenitor_2.person.secondLastName"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Nombre/s" [(ngModel)]="progenitor_2.person.firstName" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Tipo de Documento" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person.docType.code">
                      <mat-option *ngFor="let doc of documentTypes" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Documento" [(ngModel)]="progenitor_2.person.docNumber"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="date" placeholder="Fecha de Nacimiento" [(ngModel)]="progenitor_2.person.birth.birthDay"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Estado Civil" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person.civilStatus.code">
                      <mat-option *ngFor="let doc of civilStatus" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Domicilio" [(ngModel)]="progenitor_2.person.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Lugar de Nacimiento" [(ngModel)]="progenitor_2.person.birth.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Profesión" [(ngModel)]="progenitor_2.person.profession"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="progenitor_2.person.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>
                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_2','progenitor_2')">Crear
                      Persona</button>
                  </div> -->
                </div>
                <div *ngIf="personProgenitor_2.find && progenitor_2.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="center center">

                  <mat-card fxFlex.gt-sm="80" fxFlex.gt-xs="80" fxFlex="80">
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center">
                      <img style="height: 150px" *ngIf="progenitor_2.person.photoBase64" [src]="'data:image;base64,' + progenitor_2.person.photoBase64 | DifuntosSafeHtml" />
                    </div>
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40">
                      <div style="width:100%">
                        {{progenitor_2.person.lastName + ' ' + (progenitor_2.person.secondLastName ?
                        progenitor_2.person.secondLastName : '') + ',
                        ' + progenitor_2.person.firstName}}
                      </div>
                      <div style="width:100%">
                        {{progenitor_2.person.docType.name + ': ' + progenitor_2.person.docNumber}}
                      </div>
                      <div style="width:100%">
                        Fecha de Nacimiento: {{progenitor_2.person.birth.birthDay | date: 'dd/MM/yyyy'}}
                      </div>
                      <div style="width:100%">
                        {{progenitor_2.person.sex == 'M' ? 'Masculino':'Femenino'}}
                      </div>

                    </div>
                    <div fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" fxLayoutAlign="end start">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-button style="margin: 10px 10px 0 0;"
                        (click)="closePerson('progenitor_2','personProgenitor_2')"><i class="material-icons">
                          close
                        </i></button>
                    </div>
                  </mat-card>

                  <div *ngIf="progenitor_2.person.optionsLastName && progenitor_2.person.optionsLastName.length > 0"
                    fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between center"
                    style="margin-bottom: 10px;">

                    <mat-form-field *ngIf="progenitor_2.person.optionsLastName && progenitor_2.person.optionsLastName.length > 0 && !progenitor_2.person.hasSecondLastName"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select placeholder="Seleccione el Apellido" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="progenitor_2.person.lastNames" (ngModelChange)="changeLastNames($event,'progenitor_2')">
                        <mat-option *ngFor="let doc of progenitor_2.person.optionsLastName" [value]="doc">
                          {{ doc.lastName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="progenitor_2.person.lastNames" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput readonly placeholder="Segundo Apellido" [(ngModel)]="progenitor_2.person.lastNames.secondLastName"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <button *ngIf="progenitor_2.person.hasSecondLastName" fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20"
                      mat-raised-button color="primary" (click)="progenitor_2.person.hasSecondLastName = false">Modificar
                      Apellidos</button>

                  </div>

                  <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                    <ng-container *ngFor="let attr of progenitor_2Selected.attributes; let i = index;">
                      <!--INPUT-->
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <!-- END INPUT-->
                      <!--RADIO-->
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_2.person[attr.field]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="progenitor_2.personprogenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <!--END RADIO-->
                      <!--SELECT-->
                      <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END SELECT-->
                      <!--DEPARTAMENTO-->
                      <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END DEPTO-->

                      <!--CITIES-->
                      <mat-form-field *ngIf="attr.type == showCity && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                          <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END CITIES-->
                    </ng-container>

                    <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_2','progenitor_2')">Crear
                        Persona</button>
                    </div> -->
                  </div>
                </div>
              </mat-expansion-panel>
              <mat-expansion-panel [expanded]="true" *ngIf="progenitor_2Selected.name && progenitor_2Selected.value != 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Progenitor</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <ng-container *ngFor="let attr of progenitor_2Selected.attributes; let i = index;">
                    <!--INPUT-->
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <!-- END INPUT-->
                    <!--RADIO-->
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_2.person[attr.field]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="progenitor_2.personprogenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <!--END RADIO-->
                    <!--SELECT-->
                    <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END SELECT-->

                    <!--DEPARTAMENTO-->
                    <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesProgenitor_2')"[ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END DEPTO-->

                    <!--CITIES-->
                    <mat-form-field *ngIf="attr.type == showCity && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field]">
                        <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showCity && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="progenitor_2.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of citiesProgenitor_2" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END CITIES-->
                  </ng-container>

                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personProgenitor_2','progenitor_2')">Crear
                      Persona</button>
                  </div> -->
                </div>
              </mat-expansion-panel>

              <div style="text-align: right; margin:20px 0 0 0;">
                <button mat-raised-button color="primary" (click)="backStep()">Atras</button>
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="fourthFormGroup">
            <form [formGroup]="fourthFormGroup">
              <ng-template matStepLabel>Declarante</ng-template>
              <mat-card>
                <mat-card-content>
                  <mat-radio-group *ngIf="actor_declarante" fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100"
                    fxLayoutAlign="space-evenly center" [(ngModel)]="declaranteSelected" (ngModelChange)="changePersonType($event,'declarante')"
                    [ngModelOptions]="{standalone: true}">
                    <ng-container *ngFor="let actor of actor_declarante.personsType; let i = index;">
                      <mat-radio-button style="font-size: 13px" [value]="actor">{{actor.name}}</mat-radio-button>
                    </ng-container>
                  </mat-radio-group>
                </mat-card-content>
              </mat-card>
              <mat-expansion-panel [expanded]="true" *ngIf="declaranteSelected.name && declaranteSelected.value == 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Declarante </strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <span fxFlex.gt-sm="15" fxFlex.gt-xs="15" fxFlex="15">
                    <b>Buscar Persona</b>
                  </span>
                  <mat-form-field fxFlex.gt-sm="30" fxFlex.gt-xs="30" fxFlex="30">
                    <input matInput placeholder="Nº Documento" [(ngModel)]="personDeclarante.docNumber"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="personDeclarante.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>

                  <button fxFlex.gt-sm="10" fxFlex.gt-xs="10" fxFlex="10" mat-raised-button color="primary" (click)="findPerson('personDeclarante','declarante')">Buscar</button>
                </div>
                <div *ngIf="!personDeclarante.find && !declarante.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-checkbox #foreignMom value="true" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">Extranjero</mat-checkbox>
                  <mat-form-field *ngIf="foreignMom.checked" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Pais de Nacimiento" [(ngModel)]="declarante.person.nationality"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                </div>
                <div *ngIf="!personDeclarante.find && !declarante.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start">
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Apellido/s" [(ngModel)]="declarante.person.lastName" required
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Segundo Apellido" [(ngModel)]="declarante.person.secondLastName"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Nombre/s" [(ngModel)]="declarante.person.firstName" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Tipo de Documento" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person.docType.code">
                      <mat-option *ngFor="let doc of documentTypes" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Documento" [(ngModel)]="declarante.person.docNumber" [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="date" placeholder="Fecha de Nacimiento" [(ngModel)]="declarante.person.birth.birthDay"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <mat-select placeholder="Estado Civil" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person.civilStatus.code">
                      <mat-option *ngFor="let doc of civilStatus" [value]="doc.code">
                        {{ doc.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput placeholder="Domicilio" [(ngModel)]="declarante.person.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Lugar de Nacimiento" [(ngModel)]="declarante.person.birth.address.addressLine"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                    <input matInput type="text" placeholder="Profesión" [(ngModel)]="declarante.person.profession"
                      [ngModelOptions]="{standalone: true}">
                  </mat-form-field>
                  <mat-radio-group fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center"
                    [(ngModel)]="declarante.person.sex" [ngModelOptions]="{standalone: true}">
                    <mat-radio-button value="M">Masculino</mat-radio-button>
                    <mat-radio-button value="F">Femenino</mat-radio-button>
                  </mat-radio-group>
                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDeclarante','declarante')">Crear
                      Persona</button>
                  </div> -->
                </div>
                <div *ngIf="personDeclarante.find && declarante.person.id" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="center center">

                  <mat-card fxFlex.gt-sm="80" fxFlex.gt-xs="80" fxFlex="80">
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40" fxLayoutAlign="space-evenly center">
                      <img style="height: 150px" *ngIf="declarante.person.photoBase64" [src]="'data:image;base64,' + declarante.person.photoBase64 | DifuntosSafeHtml" />
                    </div>
                    <div fxFlex.gt-sm="40" fxFlex.gt-xs="40" fxFlex="40">
                      <div style="width:100%">
                        {{declarante.person.lastName + ' ' + (declarante.person.secondLastName ?
                        declarante.person.secondLastName : '') + ',
                        ' + declarante.person.firstName}}
                      </div>
                      <div style="width:100%">
                        {{declarante.person.docType.name + ': ' + declarante.person.docNumber}}
                      </div>
                      <div style="width:100%">
                        Fecha de Nacimiento: {{declarante.person.birth.birthDay | date: 'dd/MM/yyyy'}}
                      </div>
                      <div style="width:100%">
                        {{declarante.person.sex == 'M' ? 'Masculino':'Femenino'}}
                      </div>

                    </div>
                    <div fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" fxLayoutAlign="end start">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-button style="margin: 10px 10px 0 0;"
                        (click)="closePerson('declarante','personDeclarante')"><i class="material-icons">
                          close
                        </i></button>
                    </div>
                  </mat-card>

                  <div *ngIf="declarante.person.optionsLastName && declarante.person.optionsLastName.length > 0"
                    fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between center"
                    style="margin-bottom: 10px;">

                    <mat-form-field *ngIf="declarante.person.optionsLastName && declarante.person.optionsLastName.length > 0 && !declarante.person.hasSecondLastName"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select placeholder="Seleccione el Apellido" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="declarante.person.lastNames" (ngModelChange)="changeLastNames($event,'declarante')">
                        <mat-option *ngFor="let doc of declarante.person.optionsLastName" [value]="doc">
                          {{ doc.lastName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="declarante.person.lastNames" fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput readonly placeholder="Segundo Apellido" [(ngModel)]="declarante.person.lastNames.secondLastName"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <button *ngIf="declarante.person.hasSecondLastName" fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20"
                      mat-raised-button color="primary" (click)="declarante.person.hasSecondLastName = false">Modificar
                      Apellidos</button>

                  </div>

                  <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                    <ng-container *ngFor="let attr of declaranteSelected.attributes; let i = index;">
                      <!--INPUT-->
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                      <!-- END INPUT-->
                      <!--RADIO-->
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="declarante.person[attr.field]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                        *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                        [(ngModel)]="declarante.persondeclarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                        <ng-container *ngFor="let option of attr.options; let i = index;">
                          <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                        </ng-container>
                      </mat-radio-group>
                      <!--END RADIO-->
                      <!--SELECT-->
                      <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                        fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                            {{ doc.label }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END SELECT-->
                      <!--DEPTO-->

                      <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of departments" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END DEPTO-->
                      <!--CITIES-->
                      <mat-form-field *ngIf="attr.type == 'showCity' && !attr.fieldLevel2" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                          <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel2 && !attr.fieldLevel3"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                          <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel3 && !attr.fieldLevel4"
                        fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                          <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel4" fxFlex.gt-sm="45"
                        fxFlex.gt-xs="45" fxFlex="45">
                        <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                          <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                            {{ doc.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <!--END CITIES-->
                    </ng-container>

                    <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                      <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDeclarante','declarante')">Crear
                        Persona</button>
                    </div> -->
                  </div>
                </div>
              </mat-expansion-panel>
              <mat-expansion-panel [expanded]="true" *ngIf="declaranteSelected.name && declaranteSelected.value != 'PERSON_DEFAULT'">
                <mat-expansion-panel-header>
                  <strong>Declarante</strong>
                </mat-expansion-panel-header>

                <div fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                  <ng-container *ngFor="let attr of declaranteSelected.attributes; let i = index;">
                    <!--INPUT-->
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && !attr.fieldLevel2"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <mat-form-field *ngIf="['number','text','date','time'].includes(attr.type) && attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                    <!-- END INPUT-->
                    <!--RADIO-->
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="declarante.person[attr.field]" [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio' && !attr.fieldLevel2">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.type == 'radio'&& attr.fieldLevel2 && !attr.fieldLevel3">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]" required
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel3 && !attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="declarante.persondeclarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]"
                      [ngModelOptions]="{standalone: true}" *ngIf="attr.type == 'radio'&& attr.fieldLevel4">
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <!--END RADIO-->
                    <!--SELECT-->
                    <mat-form-field *ngIf="attr.type == 'select' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel2 && !attr.fieldLevel3" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel3 && !attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'select' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of attr.options" [value]="doc.value">
                          {{ doc.label }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END SELECT-->
                    <!--DEPTO-->

                    <mat-form-field *ngIf="attr.type == showDepartament && !attr.fieldLevel2" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == showDepartament && attr.fieldLevel4" fxFlex.gt-sm="45"
                      fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" [ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of departments" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END DEPTO-->
                    <!--CITIES-->
                    <mat-form-field *ngIf="attr.type == 'showCity' && !attr.fieldLevel2" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field]">
                        <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel2 && !attr.fieldLevel3"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2]">
                        <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel3 && !attr.fieldLevel4"
                      fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3]">
                        <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-form-field *ngIf="attr.type == 'showCity' && attr.fieldLevel4" fxFlex.gt-sm="45" fxFlex.gt-xs="45"
                      fxFlex="45">
                      <mat-select [placeholder]="attr.name" (ngModelChange)="getCitiesByDepartment($event,'citiesDeclarante')"[ngModelOptions]="{standalone: true}" [(ngModel)]="declarante.person[attr.field][attr.fieldLevel2][attr.fieldLevel3][attr.fieldLevel4]">
                        <mat-option *ngFor="let doc of citiesDeclarante" [value]="doc.id">
                          {{ doc.name }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <!--END CITIES-->
                  </ng-container>

                  <!-- <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end end">
                    <button fxFlex.gt-sm="20" fxFlex.gt-xs="20" fxFlex="20" mat-raised-button color="primary" (click)="postPerson('personDeclarante','declarante')">Crear
                      Persona</button>
                  </div> -->
                </div>
              </mat-expansion-panel>

              <div style="text-align: right; margin:20px 0 0 0;">
                <button mat-raised-button color="primary" (click)="backStep()">Atras</button>
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div>
            </form>
          </mat-step>
          <mat-step [stepControl]="fifthFormGroup">
            <form [formGroup]="fifthFormGroup" fxLayoutWrap="wrap" fxLayout="row">

              <ng-template matStepLabel>Documentación</ng-template>

              <h5>Información y Documentación</h5>
              <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row" fxLayoutAlign="space-between start">
                <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutWrap="wrap" fxLayout="row"
                  fxLayoutAlign="space-between start" style="margin-bottom: 30px;">
                  <ng-container *ngFor="let attr of model.procedureHasAttributeValues; let i = index;">
                    <ng-container *ngIf="attr.enableForEdit && ['text','number','date','time'].includes(attr.type)">
                      <mat-form-field fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45">
                        <input matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="model.procedureHasAttributeValues[i].value"
                          [ngModelOptions]="{standalone: true}">
                      </mat-form-field>
                    </ng-container>
                    <mat-radio-group fxFlex.gt-sm="45" fxFlex.gt-xs="45" fxFlex="45" fxLayoutAlign="space-evenly start"
                      [(ngModel)]="model.procedureHasAttributeValues[i].value" [ngModelOptions]="{standalone: true}"
                      *ngIf="attr.enableForEdit && attr.type == 'radio'">
                      {{attr.name}}
                      <ng-container *ngFor="let option of attr.options; let i = index;">
                        <mat-radio-button [value]="option.value"> {{option.label}}</mat-radio-button>
                      </ng-container>
                    </mat-radio-group>
                    <mat-form-field *ngIf="attr.enableForEdit && attr.type == 'textarea'" fxFlex.gt-sm="100"
                      fxFlex.gt-xs="100" fxFlex="100">
                      <textarea matInput [type]="attr.type" [placeholder]="attr.name" [(ngModel)]="attributesMargin[i].value"
                        [ngModelOptions]="{standalone: true}"></textarea>
                    </mat-form-field>
                    <!-- </ng-container> -->
                  </ng-container>
                </div>
                <div style="width: 100%" class="example-container">
                  <mat-table #table [dataSource]="dataSource">
                    <!-- Name Column -->
                    <ng-container matColumnDef="Archivo">
                      <mat-header-cell *matHeaderCellDef> Archivo </mat-header-cell>
                      <mat-cell *matCellDef="let element" style="margin-right: 10px"> {{element.name}} <b *ngIf="element.digitalized">
                          (Digitalizado) </b></mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="Obligatorio">
                      <mat-header-cell *matHeaderCellDef> Obligatorio </mat-header-cell>
                      <mat-cell *matCellDef="let element" style="margin-right: 10px"> {{element.required ?
                        'OBLIGATORIO'
                        : 'OPCIONAL'}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="action">
                      <mat-header-cell *matHeaderCellDef> Acción </mat-header-cell>
                      <mat-cell *matCellDef="let element; let i = index" fxLayoutWrap="wrap" style="font-size: 26px;">
                        <!-- <mat-icon matTooltip="Editar!" matTooltipPosition="above" (click)="editMargin(element,i)" style="color:#72d487;cursor:pointer">edit
            </mat-icon> -->
                        <!-- <mat-icon matTooltip="Eliminar!" matTooltipPosition="above" (click)="deleteFiles(element)" style="color:#ff6868;cursor:pointer">delete_forever
            </mat-icon> -->
                        <!-- <button *ngIf="!element.digitalized" fxFlex.gt-sm="70" fxFlex.gt-xs="70" fxFlex="70"
              mat-raised-button color="primary" (click)="digitalize(element)">Digitalizar</button> -->

                        <!-- <button *ngIf="element.digitalized" fxFlex.gt-sm="70" fxFlex.gt-xs="70" fxFlex="70"
              mat-raised-button color="warn" (click)="digitalize(element)">Digitalizar Nuevamente</button>
            <button style="margin-top:5px;" *ngIf="element.digitalized" fxFlex.gt-sm="70" fxFlex.gt-xs="70"
              fxFlex="70" mat-raised-button color="primary" (click)="digitalize(element,true)">Agregar Página</button> -->

                        <mat-icon *ngIf="btnDownloadAttach(element)" matTooltip="Descargar Documento!"
                          matTooltipPosition="above" (click)="downloadDocument(element)" style="color:#459ef1c5;cursor:pointer;font-size:25px;margin:0 5px 0 5px;">file_download
                        </mat-icon>
                        <mat-icon *ngIf="element.digitalized && !btnDownloadAttach(element)" matTooltip="Visualizar Documentación Escaneada!"
                          matTooltipPosition="above" (click)="getDocument(element)" style="color:#4556f1c5;cursor:pointer;font-size: 25px;margin:0 5px 0 5px;">remove_red_eye
                        </mat-icon>
                        <mat-icon *ngIf="element.digitalized && element.validAddPage" matTooltip="Adicionar Documentación!"
                          matTooltipPosition="above" (click)="digitalize(element,true)" style="color:#45f1a9c5;cursor:pointer;font-size: 25px;margin:0 5px 0 5px;">note_add
                        </mat-icon>
                        <mat-icon *ngIf="!element.digitalized" matTooltip="Digitalizar Documentación"
                          matTooltipPosition="above" (click)="digitalize(element)" style="color:#45c9f1c5;cursor:pointer;font-size: 30px;margin:0 5px 0 5px;">scanner
                        </mat-icon>
                        <mat-icon *ngIf="element.digitalized" matTooltip="Eliminar Documento Digitalizado!"
                          matTooltipPosition="above" (click)="deleteFiles(element)" style="color:#f14545c5;cursor:pointer;font-size:25px;margin:0 5px 0 5px;">delete_forever
                        </mat-icon>
                        <!-- <sup style="font-size: 10px;font-weight: bold;">{{'('+element.fileCount+')'}}</sup>
            <input [id]="'file-input' + i" type="file" name="name" multiple style="display: none;" (change)="uploadFiles($event,element.id,i)"
            /> -->

                        <mat-icon *ngIf="!element.digitalized" matTooltip="Adjuntar Archivo!" matTooltipPosition="above"
                          (click)="addFileAttachment(element)" style="color:#4595f1c5;cursor:pointer;font-size:25px;margin:0 5px 0 5px;">attach_file
                        </mat-icon>
                      </mat-cell>
                    </ng-container>
                    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;let i = index;"></mat-row>
                  </mat-table>
                  <!-- ELEMENTO FILE -->
                  <input [id]="'file-inputAttachment'" type="file" name="name" style="display: none;" (change)="uploadFilesAttachment($event)" />
                </div>
              </div>
              <mat-card fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" *ngIf="documentScanned.base64" style="margin-top:20px; width:100%;"
                fxLayoutWrap="wrap">
                <div fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" fxLayoutAlign="end start">
                  <button fxFlex.gt-sm="10" fxFlex.gt-xs="10" fxFlex="10" mat-button style="margin: 10px 10px 0 0;"
                    (click)="closePreviewDoc()"><i class="material-icons">
                      close
                    </i></button>
                </div>
                <app-image-viewer fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" *ngIf="documentScanned.base64"
                  [images]="[documentScanned.base64]" [idContainer]="'idOnHTML4'" [loadOnInit]="true"></app-image-viewer>
              </mat-card>
              <div style="text-align: right;margin:20px 0 0 0;width: 100%">
                <button mat-raised-button color="primary" (click)="backStep()">Atras</button>
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div>
            </form>
          </mat-step>

          <mat-step [stepControl]="sixthFormGroup">
            <form [formGroup]="sixthFormGroup">
              <ng-template matStepLabel>Finalización</ng-template>

              <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                  <strong>Observación</strong>
                </mat-expansion-panel-header>
                <mat-form-field fxFlex.gt-sm="100" fxFlex.gt-xs="100" fxFlex="100" style="margin-top: 25px; display: block;font-size: 14px;">
                  <textarea matInput placeholder="Observaciones" rows="5" [(ngModel)]="model.observations"
                    [ngModelOptions]="{standalone: true}" #observations></textarea>
                </mat-form-field>
              </mat-expansion-panel>


              <!-- <div *ngIf="pdfValidate.pdfDraftBase64" class="col-md-12">
                <a id="download" [download]="'Certificado de Validacion - .pdf'" [href]="'data:application/octet-stream;base64,' + pdfValidate.pdfDraftBase64 | reportsSafeHtml">Descargar Certificado de Validación
                  <i class="material-icons" style="font-size: 40px; ">file_download</i>
                </a>
              </div> -->
              <!-- <div *ngIf="pdfCertificate.pdfDraftBase64" class="col-md-12">
                <a id="download" [download]="'Certificado - .pdf'" [href]="'data:application/octet-stream;base64,' + pdfCertificate.pdfDraftBase64 | reportsSafeHtml">Descargar Certificado
                  <i class="material-icons" style="font-size: 40px; ">file_download</i>
                </a>
              </div> -->
              <mat-expansion-panel *ngIf="pdfValidate.pdfDraftBase64" [expanded]="true">
                <mat-expansion-panel-header>
                  <strong>Acta</strong>
                </mat-expansion-panel-header>
                <app-image-viewer *ngIf="pdfValidate.pdfDraftBase64 && !pdfCertificate.pdfDraftBase64" [images]="[pdfValidate.pdfDraftBase64]"
                  [idContainer]="'idOnHTML'" [loadOnInit]="true"></app-image-viewer>

                <app-image-viewer *ngIf="pdfCertificate.pdfDraftBase64" [images]="[pdfCertificate.pdfDraftBase64]"
                  [idContainer]="'idOnHTML2'" [loadOnInit]="true"></app-image-viewer>
              </mat-expansion-panel>
              <!-- <pdf-viewer [src]="'iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=='" [render-text]="true" style="display: block;"></pdf-viewer> -->
              <!-- <div style="text-align: right;margin:20px 0 0 0;">
                <button mat-raised-button color="primary" >Atras</button>
                <button mat-raised-button color="primary" (click)="updateProcedure()">Siguiente</button>
              </div> -->

              <div style="text-align: right;margin:20px 0 0 0;">
                <button mat-raised-button color="primary" *ngIf="!finalizado" (click)="backStep()">Atras</button>
                <button mat-raised-button color="primary" *ngIf="!finalizado" matStepperReset (click)="resetStepper(stepper)">Limpiar</button>
                <button mat-raised-button color="primary" *ngIf="!finalizado" matStepperReset (click)="updateProcedure(true)">Validar</button>
                <button mat-raised-button color="primary" *ngIf="validate && !finalizado" matStepperReset (click)="finalizarTramite()">Finalizar</button>
                <button mat-raised-button color="primary" *ngIf="finalizado" matStepperReset (click)="nextStep()">Continuar
                  con el Trámite</button>
                <button mat-raised-button color="primary" *ngIf="finalizado" matStepperReset (click)="backToInbox()">Volver
                  a la Bandeja</button>
              </div>
            </form>
          </mat-step>
        </mat-horizontal-stepper>

      </mat-card-content>
    </mat-card>
  </div>
  <!-- column -->
</div>
